<app-header></app-header>
<main>
    <div class="container">
        <!-- Label -->
        <!-- Label -->
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a routerLink="/medical-history/patients">List of Patients</a></li>
                <li class="breadcrumb-item"><a routerLink="/medical-history/patient/{{ id }}">Health</a></li>
                <li class="breadcrumb-item">
                    <a routerLink="/medical-history/patient/physicians/{{ id }}">List of Physicians</a>
                </li>
                <li class="breadcrumb-item active" aria-current="page">{{ action }}</li>
            </ol>
        </nav>
        <div class="grid">
            <div class="col-11 text-xl">
                {{
                    profileModel?.name?.lastName +
                        ' ' +
                        profileModel?.name?.middleName +
                        ', ' +
                        profileModel?.name?.firstName
                }}
            </div>
            <div class="col-1">
                <button
                    type="button"
                    class="btn btn-outline-danger btn-sm ms-3"
                    data-bs-toggle="modal"
                    data-bs-target="#deleteModalToggle"
                >
                    Delete
                </button>
            </div>
        </div>
        <div class="grid">
            <div class="col">
                <form [formGroup]="form" (ngSubmit)="savePhysician()">
                    <div class="grid">
                        <div class="col-1"></div>
                        <div class="col-2">Physician Name</div>
                        <div class="col-5" *ngIf="action == 'View'; else elseBlockfullName">
                            {{ physician?.fullName }}
                        </div>
                        <ng-template #elseBlockfullName>
                            <div class="col-5" *ngIf="action == 'Update'">
                                <input
                                    id="physicianFullname"
                                    type="text"
                                    class="form-control form-control-sm"
                                    name="fullName"
                                    formControlName="fullName"
                                    [value]="physician?.fullName"
                                    [ngClass]="{
                                        'is-invalid': submitted && f['fullName'].errors
                                    }"
                                />
                                <div *ngIf="submitted && f['fullName'].errors" class="invalid-feedback">
                                    <div *ngIf="f['fullName'].errors['required']">Physician Name is required</div>
                                    <div *ngIf="f['fullName'].errors['minlength']">
                                        Physician Name being treated must be at least 2 characters
                                    </div>
                                    <div *ngIf="f['fullName'].errors['maxlength']">
                                        Physician Name must be maximum of 83 characters
                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </div>
                    <div class="grid">
                        <div class="col-1"></div>
                        <div class="col-2">Office Address</div>
                        <div class="col-5" *ngIf="action == 'View'; else elseBlockOfficeAddress">
                            {{ physician?.officeAddress }}
                        </div>
                        <ng-template #elseBlockOfficeAddress>
                            <div class="col-5" *ngIf="action == 'Update'">
                                <input
                                    id="physicianOfficeAddress"
                                    type="text"
                                    class="form-control form-control-sm"
                                    name="officeAddress"
                                    [value]="physician?.officeAddress"
                                    formControlName="officeAddress"
                                    [ngClass]="{
                                        'is-invalid': submitted && f['officeAddress'].errors
                                    }"
                                />
                            </div>
                            <div *ngIf="submitted && f['officeAddress'].errors" class="invalid-feedback">
                                <div *ngIf="f['officeAddress'].errors['required']">Office Address is required</div>
                                <div *ngIf="f['officeAddress'].errors['minlength']">
                                    Office Address being treated must be at least 2 characters
                                </div>
                                <div *ngIf="f['officeAddress'].errors['maxlength']">
                                    Office Address must be maximum of 83 characters
                                </div>
                            </div>
                        </ng-template>
                    </div>
                    <div class="grid">
                        <div class="col-1"></div>
                        <div class="col-2">Office Number</div>
                        <div class="col-5" *ngIf="action == 'View'; else elseBlockOfficeNumber">
                            {{ physician?.officeNumber }}
                        </div>
                        <ng-template #elseBlockOfficeNumber>
                            <div class="col-5" *ngIf="action == 'Update'">
                                <input
                                    id="physicianOfficeNumber"
                                    type="text"
                                    class="form-control form-control-sm"
                                    name="fullName"
                                    [value]="physician?.officeNumber"
                                    formControlName="officeNumber"
                                    [ngClass]="{
                                        'is-invalid': submitted && f['officeNumber'].errors
                                    }"
                                />
                                <div *ngIf="submitted && f['officeNumber'].errors" class="invalid-feedback">
                                    <div *ngIf="f['officeNumber'].errors['required']">Office Number is required</div>
                                    <div *ngIf="f['officeNumber'].errors['minlength']">
                                        Office Number being treated must be at least 2 characters
                                    </div>
                                    <div *ngIf="f['officeNumber'].errors['maxlength']">
                                        Office Number must be maximum of 83 characters
                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </div>
                    <div class="grid">
                        <div class="col-1"></div>
                        <div class="col-2">Specialty</div>
                        <div class="col-5" *ngIf="action == 'View'; else elseBlockSpecialty">
                            {{ physician?.specialty }}
                        </div>
                        <ng-template #elseBlockSpecialty>
                            <div class="col-5" *ngIf="action == 'Update'">
                                <input
                                    id="physicianSpecialty"
                                    type="text"
                                    class="form-control form-control-sm"
                                    name="fullName"
                                    [value]="physician?.specialty"
                                    formControlName="specialty"
                                    [ngClass]="{
                                        'is-invalid': submitted && f['specialty'].errors
                                    }"
                                />
                                <div *ngIf="submitted && f['specialty'].errors" class="invalid-feedback">
                                    <div *ngIf="f['specialty'].errors['required']">Specialty is required</div>
                                    <div *ngIf="f['specialty'].errors['minlength']">
                                        Specialty being treated must be at least 2 characters
                                    </div>
                                    <div *ngIf="f['specialty'].errors['maxlength']">
                                        Specialty must be maximum of 83 characters
                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </div>
                    <div class="grid justify-content-center">
                        <div class="col-4"><hr /></div>
                    </div>
                    <div class="grid justify-content-center">
                        <!-- <div class="col-2 text-lg"></div> -->
                        <div class="col-4" *ngIf="action == 'View'; else elseBlockSaveUpdate">
                            <label for="saveallnowid">Do you want to edit? &nbsp; &nbsp;</label>
                            <button
                                type="button"
                                id="saveallnowid"
                                class="btn btn-outline-primary btn-sm -mt-1"
                                (click)="updatePhysician()"
                            >
                                Update
                            </button>
                        </div>
                        <ng-template #elseBlockSaveUpdate>
                            <div class="col-4">
                                <label for="saveallnowid">Are you done? &nbsp; &nbsp;</label>
                                <button
                                    type="button"
                                    id="saveallnowid"
                                    class="btn btn-outline-primary btn-sm -mt-1"
                                    type="submit"
                                >
                                    Save
                                </button>
                                &nbsp;
                                <button
                                    type="button"
                                    id="saveallnowid"
                                    class="btn btn-outline-danger btn-sm -mt-1"
                                    (click)="cancelPhysician()"
                                >
                                    Cancel
                                </button>
                            </div>
                        </ng-template>
                    </div>
                </form>
            </div>
        </div>
        <!-- Delete Modal -->
        <div
            class="modal"
            id="deleteModalToggle"
            tabindex="-1"
            aria-labelledby="deleteModalToggleLabel"
            aria-hidden="true"
        >
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <p class="modal-title lbltext" id="deleteModalToggleLabel">Are you sure?</p>
                        <button
                            type="button"
                            class="btn-close btn-sm"
                            data-bs-dismiss="modal"
                            aria-label="Close"
                        ></button>
                    </div>
                    <div class="modal-body">
                        <div class="container-fluid">
                            <div class="row">
                                <div class="col-md-1">Note:</div>
                                <div class="col-md-10 text-center">
                                    This action will <span class="fw-bold">remove</span> all medical data pertaining to
                                    <br />
                                    <span class="fst-italic text-decoration-underline"
                                        >{{
                                            profileModel?.name?.lastName +
                                                ' ' +
                                                profileModel?.name?.middleName +
                                                ', ' +
                                                profileModel?.name?.firstName
                                        }}.</span
                                    >
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button
                                type="button"
                                class="btn btn-outline-danger btn-sm me-3"
                                (click)="deletePhysician()"
                                data-bs-dismiss="modal"
                            >
                                Delete
                            </button>
                            <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">
                                Close
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div
            class="modal fade"
            id="displayImageModalToggle"
            tabindex="-1"
            aria-labelledby="displayImageModalToggleLabel"
            aria-hidden="true"
        >
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <p class="modal-title lbltext" id="displayImageModalToggleLabel">Delete?</p>
                        <button
                            type="button"
                            class="btn-close btn-sm"
                            data-bs-dismiss="modal"
                            aria-label="Close"
                        ></button>
                    </div>
                    <div class="modal-body">
                        <div class="container-fluid">
                            <div class="row">delete now?</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<app-footer></app-footer>
